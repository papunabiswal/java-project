pipeline {
    agent any
    tools {
        maven "project-maven"
    }
    environment {
        scannerHome = tool "SonarScanner"
    }
    stages {
        stage('Git Checkout') {
            steps {
                git credentialsId: 'GitHub', url: 'https://github.com/papunabiswal/java-project.git'
            }
        }
        stage('Maven Goal') {
            steps {
            script{
                sh "mvn clean install package"
            }
            }
        }
        stage('Static code Analisys') {
            steps {
            script{
                def mvn = tool 'project-maven';
                withSonarQubeEnv() {
                    sh "${mvn}/bin/mvn clean verify sonar:sonar -Dsonar.projectKey=demo-backendapp"
                }
            }
            }
        }
        
    }
}